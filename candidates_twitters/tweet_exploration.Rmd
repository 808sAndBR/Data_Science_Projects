---
title: "Tweet Exploration"
author: "Scott Brenstuhl"
date: "December 8, 2015"
output: html_document
---

```{r libraries, alert=FALSE, message = FALSE}
library(dplyr)
library(lubridate)
```

```{r}
# Read in tweets produced by twitter_scraper.py
tweets <- read.csv('canidate_tweets.csv', stringsAsFactors = FALSE)

tweets$datetime <- paste(substr(tweets$created,27,31),
                         substr(tweets$created, 5, 19)) %>%
    ymd_hms() %>%
    as.POSIXct()

tweets$is_retweet <- ifelse(grepl('*RT', tweets$text), TRUE, FALSE)

tweets$text <- gsub('\\\n',' ', tweets$text)

tweets$links <- strsplit(tolower(tweets$text), " ") %>%
    lapply(grep, pattern= 'http', value = TRUE)


tweets$split <- strsplit(tolower(tweets$text), " ")



extractor <- function(string, includes = TRUE){
    split_tweet = tolower(tweets$text)
    if(includes){
        occurences = split_tweet[!grepl(string, split_tweet)]
    } else {  
        occurences = grep(string, split_tweet, value = TRUE)
    }
    occurences
}

unlist(strsplit(tolower(tweets$text[10]), " "))[!grepl("http", unlist(strsplit(tolower(tweets$text[10]), " ")))]

?grep
?str_split
class(tweets$text[10])
?strsplit
```